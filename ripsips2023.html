<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Captura RIPS - Resolución 2275 de 2023</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #f4f6f8;
    margin: 0;
    padding: 20px;
    color: #333;
  }
  h1, h2 {
    color: #005b96;
    text-align: center;
  }
  form {
    max-width: 1000px;
    margin: auto;
    background: white;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0px 4px 10px rgba(0,0,0,0.1);
  }
  fieldset {
    margin-bottom: 20px;
    border: 1px solid #ccc;
    padding: 15px;
    border-radius: 8px;
  }
  legend {
    font-weight: bold;
    color: #005b96;
  }
  label {
    display: block;
    margin-top: 10px;
    font-weight: bold;
  }
  input, select, textarea {
    width: 100%;
    padding: 8px;
    margin-top: 4px;
    border: 1px solid #ccc;
    border-radius: 5px;
  }
  textarea {
    resize: vertical;
  }
  .botones {
    display: flex;
    justify-content: center;
    gap: 15px;
  }
  button {
    background: #005b96;
    color: white;
    padding: 10px 15px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
  }
  button:hover {
    background: #00406b;
  }
</style>
</head>
<body>

<h1>Formulario RIPS - Resolución 2275 de 2023</h1>

<form id="formRIPS">

  <fieldset>
    <legend>Datos de Factura</legend>
    <label>Número de Factura:</label>
    <input type="text" name="numero_factura" required>

    <label>Código del Prestador de Servicios de Salud:</label>
    <input type="text" name="codigo_prestador" required>
  </fieldset>

  <fieldset>
    <legend>Datos del Usuario</legend>
    <label>Tipo de Identificación:</label>
    <select name="tipo_identificacion" required>
      <option value="">Seleccione</option>
      <option value="CC">Cédula de Ciudadanía</option>
      <option value="TI">Tarjeta de Identidad</option>
      <option value="RC">Registro Civil</option>
      <option value="CE">Cédula de Extranjería</option>
    </select>

    <label>Número de Identificación:</label>
    <input type="text" name="numero_identificacion" required>
  </fieldset>

  <fieldset>
    <legend>Datos de la Atención</legend>
    <label>Fecha de la Consulta:</label>
    <input type="date" name="fecha_consulta" required>

    <label>Número de Autorización:</label>
    <input type="text" name="numero_autorizacion">

    <label>Código de la Consulta (CUPS):</label>
    <select name="codigo_cups" required>
      <option value="">Seleccione</option>
      <option value="99201">99201 - Consulta médica general</option>
      <option value="99202">99202 - Consulta médica especializada</option>
    </select>

    <label>Finalidad de la Consulta:</label>
    <select name="finalidad_consulta" required>
      <option value="">Seleccione</option>
      <option value="01">01 - Diagnóstico</option>
      <option value="02">02 - Control</option>
      <option value="03">03 - Urgencias</option>
    </select>

    <label>Causa Externa:</label>
    <select name="causa_externa">
      <option value="">Seleccione</option>
      <option value="01">Accidente de tránsito</option>
      <option value="02">Accidente de trabajo</option>
      <option value="03">Evento de violencia</option>
    </select>

    <label>Código Diagnóstico Principal (CIE-10):</label>
    <select name="cie10_principal" required>
      <option value="">Seleccione</option>
      <option value="A00">A00 - Cólera</option>
      <option value="B20">B20 - VIH/SIDA</option>
      <option value="J06">J06 - Infección aguda vías respiratorias</option>
    </select>

    <label>Código Diagnóstico Relacionado (CIE-10):</label>
    <select name="cie10_relacionado">
      <option value="">Seleccione</option>
      <option value="E11">E11 - Diabetes mellitus tipo 2</option>
      <option value="I10">I10 - Hipertensión esencial</option>
    </select>
  </fieldset>

  <fieldset>
    <legend>Observaciones</legend>
    <textarea name="observaciones" rows="4" placeholder="Escriba observaciones adicionales..."></textarea>
  </fieldset>

  <div class="botones">
    <button type="button" onclick="guardarCSV()">Guardar y Descargar CSV</button>
    <button type="reset">Limpiar</button>
  </div>
</form>

<script>
function guardarCSV() {
  const form = document.getElementById("formRIPS");
  const data = new FormData(form);
  const valores = Array.from(data.values());
  const encabezados = Array.from(data.keys());

  let csv = encabezados.join(",") + "\n" + valores.join(",");

  let blob = new Blob([csv], { type: "text/csv;charset=utf-8;" });
  let link = document.createElement("a");
  link.href = URL.createObjectURL(blob);
  link.download = "RIPS_2275_2023.csv";
  document.body.appendChild(link);
  link.click();
  document.body.removeChild(link);
}
</script>

</body>
</html>
